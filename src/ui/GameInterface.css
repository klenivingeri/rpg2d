:root{
  --gi-z: 10;
  --btn-size: 56px;
}

.game-interface{
  position:absolute;
  top:0;
  left:0;
  width:100vw;
  height:calc(var(--vh, 1vh) * 100);
  z-index:var(--gi-z);
  pointer-events:none; /* default none, child panels enable when needed */
  display:grid;
  grid-template-columns: repeat(12, 1fr);
  grid-template-rows: repeat(12, 1fr);
}

/* Grid visualization helper: adiciona linhas e bordas das células para debugging/visualização */
.game-interface.gi-grid-visible::before{
  content: '';
  position: absolute;
  inset: 0;
  pointer-events: none;
  z-index: 9999;
  /* linhas verticais e horizontais em tom de verde */
  background-image:
    linear-gradient(to right, rgba(46,204,113,0.16) 1px, transparent 1px),
    linear-gradient(to bottom, rgba(46,204,113,0.16) 1px, transparent 1px);
  background-size: calc(100% / 12) 100%, 100% calc(100% / 12);
  background-repeat: repeat, repeat;
  /* borda externa verde mais visível */
  box-shadow: inset 0 0 0 1px rgba(46,204,113,0.35);
  mix-blend-mode: overlay;
}

/* Toggle do grid (botão de debug) */
.gi-grid-toggle{
  position:fixed;
  top:10px;
  left:10px;
  z-index:10002;
  pointer-events:auto;
  background:rgba(0,0,0,0.6);
  color:#fff;
  border:1px solid rgba(255,255,255,0.08);
  padding:6px 8px;
  border-radius:8px;
  font-size:12px;
}
.gi-grid-toggle:active{transform:translateY(1px)}

/* Init panel centered */
.gi-init{
  /* fallback grid placement (kept for compatibility) */
  grid-column: 3 / span 8;
  grid-row: 3 / span 8;
  /* tornar o painel absolutamente centrado para garantir alinhamento
     consistente em diferentes viewports/scrollbars */
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  max-width: min(720px, 90vw);
  width: auto;
  background: rgba(0,0,0,0.7);
  color:#fff;
  border-radius:12px;
  padding:20px;
  display:flex;
  flex-direction:column;
  gap:12px;
  align-items:center;
  justify-content:center;
  z-index: 10001;
}

.gi-equip-slots{display:flex;gap:10px}
.slot{width:96px;height:96px;background:#222;border-radius:8px;display:flex;align-items:center;justify-content:center}

.gi-placeholders{display:flex;gap:10px}
.placeholder{width:180px;height:80px;background:#333;border-radius:8px;display:flex;align-items:center;justify-content:center}

.gi-start{font-size:18px;padding:12px 24px;border-radius:10px}

/* Progress bar area (L1C6 - L2C7) => approx columns 6-7 rows 1-2 */
.gi-progress{grid-column:6 / span 2;grid-row:1 / span 2;align-self:start;justify-self:center;pointer-events:auto}
.gi-progress-bar{width:220px;height:18px;background:#222;border-radius:10px;overflow:hidden}
.gi-progress-fill{height:100%;background:linear-gradient(90deg,#ffd54f,#ff8a65)}
.gi-progress-label{color:#fff;font-size:12px;margin-bottom:6px;text-align:center}

/* Buttons positions */
.gi-top-right{grid-column:12 / span 1;grid-row:1 / span 1;justify-self:end;align-self:start;margin:12px}
.gi-bottom-left{grid-column:1 / span 1;grid-row:12 / span 1;justify-self:start;align-self:end;margin:12px}
.gi-bottom-right{grid-column:12 / span 1;grid-row:12 / span 1;justify-self:end;align-self:end;margin:12px}

.gi-btn{pointer-events:auto;background:#444;color:#fff;border:none;padding:10px 14px;border-radius:12px;font-size:16px}
.gi-btn-large{width:var(--btn-size);height:var(--btn-size);border-radius:14px;font-size:14px}
.gi-btn-primary{background:#2ecc71}
.gi-btn-ghost{background:transparent;color:#888;border:1px solid #444;padding:6px 10px}

/* Modal */
.gi-modal{position:fixed;inset:0;display:flex;align-items:center;justify-content:center;z-index:10050;pointer-events:auto}
.gi-modal::backdrop{background:rgba(0,0,0,0.6)}
.gi-modal-content{width:min(560px,90vw);background:#111;padding:16px;border-radius:10px;border:1px solid #333;color:#fff;pointer-events:auto}
/* Garantir que botões dentro do modal sejam interativos mesmo com .game-interface pointer-events:none */
.gi-modal, .gi-modal *{pointer-events:auto}

.gi-menu-options{display:flex;flex-direction:column;gap:8px}
.gi-option{display:flex;align-items:center;gap:10px;color:#fff}
.gi-option input[type="checkbox"]{width:16px;height:16px}
.gi-modal-header{display:flex;justify-content:space-between;align-items:center}
.gi-modal-body{margin-top:12px}

/* Result panel */
.gi-result{grid-column:4 / span 6;grid-row:4 / span 6;background:rgba(0,0,0,0.8);color:#fff;padding:20px;border-radius:12px}

/* Responsivo: botões maiores no mobile */
@media (max-width:600px){
  :root{--btn-size:72px}
  .gi-start{font-size:20px;padding:14px 26px}
}

/* Ajustes específicos para mobile/tablet para garantir que o painel init
   fique centralizado e rolável quando o teclado virtual estiver presente */
@media (max-width:800px){
  .gi-init{
    position: fixed;
    left: 50%;
    top: 50%;
    transform: translate(-50%,-50%);
    width: min(96vw, 720px);
    max-height: calc(100vh - 80px);
    overflow: auto;
    padding: 16px;
    box-sizing: border-box;
  }
}

/* Loader overlay */
.gi-loading-overlay{
  position:fixed;
  inset:0;
  display:flex;
  align-items:center;
  justify-content:center;
  background:rgba(0,0,0,0.6);
  z-index:2000;
}
.gi-loader{
  width:min(420px,80vw);
  padding:18px;
  background:#111;
  border-radius:10px;
  border:1px solid #333;
  color:#fff;
  text-align:center;
}
.gi-loader-bar{
  width:100%;
  height:12px;
  background:#222;
  border-radius:8px;
  overflow:hidden;
  margin-top:12px;
}
.gi-loader-progress{
  height:100%;
  width:30%;
  background:linear-gradient(90deg,#4fc3f7,#81c784);
  border-radius:8px;
  animation: gi-loader-move 1.1s linear infinite;
}
@keyframes gi-loader-move{
  0%{transform: translateX(-100%)}
  100%{transform: translateX(300%)}
}
